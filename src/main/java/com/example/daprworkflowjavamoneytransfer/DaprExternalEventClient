package com.example.daprworkflowjavamoneytransfer;

import io.dapr.workflows.client.DaprWorkflowClient;
import java.util.concurrent.TimeoutException;

public class DemoExternalEventClient {
  /**
   * The main method to start the client.
   *
   * @param args Input arguments (unused).
   * @throws InterruptedException If program has been interrupted.
   */
  public static void main(String[] args) {
    try (DaprWorkflowClient client = new DaprWorkflowClient()) {
      String instanceId = client.scheduleNewWorkflow(MoneyTransferWorkflow.class);
      System.out.printf("Started a new external-event workflow with instance ID: %s%n", instanceId);

      client.raiseEvent(instanceId, "Approval", true);
      //client.raiseEvent(instanceId, "Approval", false);

      client.waitForInstanceCompletion(instanceId, null, true);
      System.out.printf("workflow instance with ID: %s completed.", instanceId);

    } catch (TimeoutException | InterruptedException e) {
      throw new RuntimeException(e);
    }
  }
}
